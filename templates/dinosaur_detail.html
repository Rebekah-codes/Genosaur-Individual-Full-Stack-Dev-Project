{% extends 'base.html' %}

{% block content %}
<div class="card shadow-sm mx-auto" style="max-width: 600px;">
  <div class="card-body text-center">
    <h2 class="card-title">ðŸ¦• {{ dino.name }}</h2>
    <p class="lead">{{ dino.species_name }}</p>
    <p>
      <strong>Stage:</strong> {{ dino.stage }}<br>
      <strong>Mood:</strong> {{ dino.mood }}
    </p>

    <!-- Perform Action Form -->
    <h4 class="mt-4">Interact with {{ dino.name }}</h4>
    <form method="POST" action="{% url 'perform_action' dino.id %}" class="mb-4">
      {% csrf_token %}
      <div class="input-group">
        <select name="action_type" class="form-select">
          <option value="feed">Feed</option>
          <option value="play">Play</option>
          <option value="train">Train</option>
        </select>
        <button type="submit" class="btn btn-primary">Do Action</button>
      </div>
    </form>

    <!-- Traits -->
    <h4 class="mt-4">Traits</h4>
    {% if dino.traits.all %}
      <ul class="list-group mb-3">
        {% for trait in dino.traits.all %}
          <li class="list-group-item">
            <strong>{{ trait.name }}</strong> â€” {{ trait.description }}
            {% if trait.mood_impact %}
              <span class="badge bg-info text-dark">{{ trait.mood_impact }}</span>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No traits unlocked yet.</p>
    {% endif %}

    <!-- Recent Actions -->
    <h4 class="mt-4">Recent Actions</h4>
    {% if actions %}
      <ul class="list-group">
        {% for action in actions %}
          <li class="list-group-item">
            <strong>{{ action.get_action_type_display }}</strong> â†’ {{ action.outcome }}
            <br><small class="text-muted">{{ action.timestamp|date:"M d, Y H:i" }}</small>
          </li>
        {% endfor %}
      </ul>
    {% else %}
      <p>No actions yet. Try feeding, playing, or training!</p>
    {% endif %}
  </div>
</div>
{% endblock %}
