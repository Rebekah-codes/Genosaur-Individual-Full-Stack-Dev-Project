{% extends 'base.html' %}
{% load static %}

{% block content %}
	<div class="text-center mb-4">
	<img src="{% static 'images/genosaur_logo_optimized_.webp' %}" alt="Genosaur Logo" style="max-width: 600px; width: 100%; height: auto; margin-bottom: 2rem;">
	</div>
	<h1 class="text-center mb-4">ðŸ¥š Your Eggs</h1>

	<div class="row">
		{% for egg in eggs %}
			<div class="col-md-4 mb-4">
				<div class="card shadow-sm h-100 text-center card-brown">
					{% if egg.is_hatched and egg.dinosaur %}
						<!-- Cracked egg sprite with dino info -->
						<img src="{% static 'images/egg_cracked_optimized_.webp' %}" 
							 class="card-img-top mx-auto d-block mt-3" 
							 alt="Cracked Egg" 
							 style="max-width: 150px;">
						<div class="card-body">
							<h5 class="card-title">
								<a href="{% url 'dinosaur_detail' egg.dinosaur.id %}">
									{{ egg.dinosaur.name }}
								</a>
							</h5>
							<p class="card-text">
								Stage: {{ egg.dinosaur.stage }}<br>
								Mood: {{ egg.dinosaur.mood }}
							</p>
						</div>
					{% elif egg.is_hatched %}
						<!-- Cracked egg sprite, but no dino info yet -->
						<img src="{% static 'images/egg_cracked_optimized_.webp' %}" 
							 class="card-img-top mx-auto d-block mt-3" 
							 alt="Cracked Egg" 
							 style="max-width: 150px;">
						<div class="card-body">
							<h5 class="card-title">Hatched!</h5>
							<p class="card-text">Your dino is being created...</p>
						</div>
					{% else %}
						<!-- Unhatched egg sprite -->
						<img src="{% static 'images/egg_optimized_.webp' %}" 
							 class="card-img-top mx-auto d-block mt-3" 
							 alt="Egg sprite" 
							 style="max-width: 150px;">
						<div class="card-body">
							<h5 class="card-title">{{ egg.species_name }}</h5>
							<p class="card-text">
								Element: <span class="badge bg-info text-dark">{{ egg.element_type }}</span><br>
								Rarity: <span class="badge bg-secondary">{{ egg.rarity }}</span>
							</p>
							<form method="POST" action="{% url 'hatch_egg' egg.id %}">
								{% csrf_token %}
								<button class="btn btn-success">Hatch</button>
							</form>
						</div>
					{% endif %}
				</div>
			</div>
		{% empty %}
			<p class="text-center">No eggs yet â€” time to earn your first one!</p>
		{% endfor %}
			</div>
			   {% if not has_egg and not has_dino %}
			   <div class="text-center mt-4">
				   <div class="alert alert-warning">You don't have any eggs or dinosaurs yet!</div>
				   <a href="{% url 'claim_egg' %}" class="btn btn-success">Claim Your First Egg</a>
			   </div>
			   {% endif %}
		{% endblock %}
